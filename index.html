<!DOCTYPE html>
<html>
<head>
    <title>WebXR Camera Pose</title>
    <script src="https://cdn.jsdelivr.net/npm/@immersive-web/webxr-polyfill@latest/dist/webxr-polyfill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@immersive-web/webxr@latest/dist/webxr.js"></script>
</head>
<body>
    <button onclick="startXR()">Start WebXR</button>
    <div id="output"></div>

    <script>
        async function startXR() {
            const session = await navigator.xr.requestSession('immersive-ar', {
                requiredFeatures: ['viewer'],
            });

            const viewerSpace = await session.requestReferenceSpace('viewer');

            session.requestAnimationFrame((time, frame) => {
                const viewerPose = frame.getViewerPose(viewerSpace);

                if (viewerPose) {
                    const position = viewerPose.transform.position;
                    const orientation = viewerPose.transform.orientation;

                    document.getElementById('output').innerText = `Camera Position: ${position.x.toFixed(2)}, ${position.y.toFixed(2)}, ${position.z.toFixed(2)}\n
                    Camera Orientation: ${orientation.x.toFixed(2)}, ${orientation.y.toFixed(2)}, ${orientation.z.toFixed(2)}, ${orientation.w.toFixed(2)}`;
                }

                session.requestAnimationFrame(() => startXR());
            });
        }
    </script>
</body>
</html>
