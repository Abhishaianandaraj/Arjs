<!DOCTYPE html>
<html>
<head>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
</head>
<body>
  <a-scene>
    <!-- Camera -->
    <a-entity camera></a-entity>

    <!-- Place the model at a specific position relative to the camera -->
    <a-entity id="model" gltf-model="models/scene.gltf"></a-entity>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Function to set and update model position relative to camera
        function updateModelPositionRelativeToCamera() {
          const cameraPosition = camera.getAttribute('position');
          model.setAttribute('position', {
            x: cameraPosition.x + positionOffset.x,
            y: cameraPosition.y + positionOffset.y,
            z: cameraPosition.z + positionOffset.z
          });
          // Log camera position every 1 second
          setInterval(() => {
            console.log("Camera position:", cameraPosition);
          }, 1000);
        }

        // Wait for the camera entity to be loaded
        const cameraLoadedHandler = () => {
          const camera = document.querySelector('a-camera');
          const model = document.querySelector('#model');
          const positionOffset = { x: 0, y: 0, z: -3 }; // Adjust as needed

          // Check if the camera element exists
          if (camera) {
            // Set initial model position
            updateModelPositionRelativeToCamera();

            // Listen for camera position changes
            camera.addEventListener('componentchanged', (event) => {
              if (event.detail.name === 'position') {
                updateModelPositionRelativeToCamera();
              }
            });

            // Remove the camera loaded event listener once it's done
            camera.removeEventListener('loaded', cameraLoadedHandler);
          }
        };

        // Listen for the loaded event on the camera entity
        const camera = document.querySelector('a-camera');
        if (camera) {
          camera.addEventListener('loaded', cameraLoadedHandler);
        }
      });
    </script>
  </a-scene>
</body>
</html>
